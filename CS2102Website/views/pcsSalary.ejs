<!DOCTYPE html>
<html lang="en" dir="ltr">
<%- include('pcsHeader.ejs') %>
<link rel="stylesheet" href="css/styles.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<head>
  <meta charset="utf-8">
  <title></title>
</head>

<body>
  <div class="parent">
    <div class="mainTitle">
      <h1>Salaries</h1>
    </div>
    <div class="subTitle">
      <% const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];%>
      <% const d = new Date(); %>
      <p><%= monthNames[d.getMonth()] %></p>
    </div>

    <div class="Salaries">
      <div class="salariesLeftCol">
        <div class="">
          <p><b>Total Salary to be paid </b></p>
          <p><b>for the current month:</b></p>
        </div>

      </div>

      <div class="salariesRightCol">
        <div>
          <% if (typeof totalSalary != 'undefined') { %>
          <h1 class="salary"><b>$<%= totalSalary[0].pay %></b></h1>
          <% } else { %>
            <h1 class="salary">Not Available</h1>
          <% } %>
        </div>
      </div>
    </div>

    <div class="filterBox">
      <div class="filterText">
        <h4>Filter for Salary</h4>
      </div>
      <form class="filterForm" action="/pcsSalary" method="post">

        <div class="row">
          <div class="col-auto my-10">
            <label class="mr-sm-2" for="inlineFormCustomSelect" >Month *</label>
            <select class="custom-select mr-sm-2" id="month" name="month" required>
              <option id="month" name="month" selected>Choose</option>
              <option id="month" name="month" value="Jan">January</option>
              <option id="month" name="month" value="Feb">February</option>
              <option id="month" name="month" value="Mar">March</option>
              <option id="month" name="month" value="Apr">April</option>
              <option id="month" name="month" value="May">May</option>
              <option id="month" name="month" value="Jun">June</option>
              <option id="month" name="month" value="Jul">July</option>
              <option id="month" name="month" value="Aug">August</option>
              <option id="month" name="month" value="Sep">September</option>
              <option id="month" name="month"value="Oct">October</option>
              <option id="month" name="month" value="Nov">November</option>
              <option id="month" name="month" value="Dec">December</option>
            </select>
          </div>
          <div class="col-auto my-10">
            <% const d2 = new Date(); %>
            <% const year = d2.getFullYear(); %>
            <label class="mr-sm-2" for="inlineFormCustomSelect">Year *</label>
            <select class="custom-select mr-sm-2" id="year" name="year" required>
              <option id="year" name="year" selected>Choose</option>
              <% for (var i = -10; i < 1; i++) {%>
                <option id="year" name="year" value="<%= (year + i)%>"><%= (year + i)%></option>
              <% } %>
            </select>
          </div>
        </div>
        <br>
        <div class="row">
          <div class="form-group col-md-6">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name" name="name" placeholder="Name" autocomplete="off">
          </div>
          <div class="form-group col-md-6">
            <label for="username">Username *</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Username" autocomplete="off" required>
          </div>
        </div>
        <div class="addPetButton">
          <button type="submit" class="btn btn-outline-primary" onclick="location.href = '/pcsSalary'">Filter</button>
        </div>

      </form>
    </div>


    <div class="filteredSalary">
      <div class="tableheading">
        <h4>Salaries</h4>
      </div>
      <div class="salaryTable">
        <table class="table">
          <tbody>
            <tr>
              <th scope="row">Name</th>
              <th>Username</th>
              <th>Job Type</th>
              <th>Salary</th>
              <th class="noborderright">Bonus</th>
            </tr>
            <tr>
              <td><%=ct_name%></td>
              <td><%=username%></td>
              <td><%=jobType%></td>
              <% if (typeof salary[0] != 'undefined') {%> 
                <td>$<%=salary[0].pay%></td>
              <% } else { %>
                <td>Not Availabile</td>
              <% } %>
              <% if (typeof bonus[0] != 'undefined') {%> 
                <td class="noborderright">$<%=bonus[0].bonus%></td>
              <% } else { %>
                <td class="noborderright">Not Availabile</td>
              <% } %>
              
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="filler">

    </div>
    <div class="filler">

    </div>
    <div class="filler">

    </div>
  </div>
</body>

</html>
